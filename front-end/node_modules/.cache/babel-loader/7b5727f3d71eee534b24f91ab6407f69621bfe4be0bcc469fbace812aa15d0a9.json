{"ast":null,"code":"var _jsxFileName = \"D:\\\\New folder\\\\CheapTrip\\\\front-end\\\\src\\\\pages\\\\Home.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport '../styles/home.css';\nimport { askGemini } from '../services/aiService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const handleSend = async () => {\n    if (!input.trim() || loading) return;\n    const userMessage = {\n      role: 'user',\n      parts: [{\n        text: input\n      }]\n    };\n    const systemPrompt = {\n      role: 'user',\n      parts: [{\n        text: 'Bạn là một trợ lý ảo chuyên về du lịch tên là chipchip. Chỉ trả lời các câu hỏi liên quan đến thông tin khách hàng và du lịch như gợi ý hành trình, địa điểm tham quan, ngân sách, phương tiện di chuyển, trải nghiệm. Nếu câu hỏi không liên quan, hãy từ chối một cách lịch sự. Không hỏi nhiều hơn 1 câu. Thêm icon cuối câu'\n      }]\n    };\n    const conversation = [systemPrompt, ...messages, userMessage];\n    setMessages(prev => [...prev, userMessage]);\n    setInput('');\n    setLoading(true);\n    try {\n      const reply = await askGemini(conversation);\n      const botMessage = {\n        role: 'model',\n        parts: [{\n          text: reply\n        }]\n      };\n      setMessages(prev => [...prev, botMessage]);\n    } catch (err) {\n      console.error(err);\n      setMessages(prev => [...prev, {\n        role: 'model',\n        parts: [{\n          text: '❌ Lỗi kết nối đến AI'\n        }]\n      }]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const renderText = msg => {\n    var _msg$parts, _msg$parts$;\n    return ((_msg$parts = msg.parts) === null || _msg$parts === void 0 ? void 0 : (_msg$parts$ = _msg$parts[0]) === null || _msg$parts$ === void 0 ? void 0 : _msg$parts$.text) || '';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: \"/cheaptrip-logo.png\",\n      alt: \"CheapTrip Logo\",\n      className: \"background-logo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-4xl mb-4 font-bold\",\n        children: \"Ch\\xE0o m\\u1EEBng \\u0111\\u1EBFn v\\u1EDBi CheapTrip \\uD83C\\uDF0D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mb-6 text-lg\",\n        children: \"T\\u01B0 v\\u1EA5n h\\xE0nh tr\\xECnh du l\\u1ECBch th\\xF4ng minh v\\u1EDBi tr\\u1EE3 l\\xFD \\u1EA3o ChipChip \\uD83E\\uDDF3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-box bg-white text-black rounded-xl p-4 max-w-xl w-full mx-auto shadow-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-64 overflow-y-auto mb-4 border border-gray-300 rounded p-2 bg-gray-50\",\n          children: [messages.map((m, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `mb-2 flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `inline-block p-2 rounded-xl max-w-xs shadow text-sm ${m.role === 'user' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-black'}`,\n              children: renderText(m)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 17\n            }, this)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this)), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-left mb-2\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"inline-block bg-white shadow p-2 rounded\",\n              children: \"ChipChip \\u0111ang suy ngh\\u0129...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"flex-grow p-2 border border-gray-300 rounded-l\",\n            value: input,\n            onChange: e => setInput(e.target.value),\n            onKeyDown: e => e.key === 'Enter' && handleSend(),\n            disabled: loading,\n            placeholder: \"H\\u1ECFi tr\\u1EE3 l\\xFD v\\u1EC1 chuy\\u1EBFn \\u0111i c\\u1EE7a b\\u1EA1n...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSend,\n            className: \"px-4 py-2 bg-blue-600 text-white rounded-r hover:bg-blue-700 transition\",\n            disabled: loading,\n            children: \"G\\u1EEDi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scroll-indicator\",\n      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n        width: \"24\",\n        height: \"24\",\n        fill: \"#fff\",\n        children: /*#__PURE__*/_jsxDEV(\"circle\", {\n          cx: \"12\",\n          cy: \"12\",\n          r: \"10\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"QcbopfskvOtpvx/BuTIYXPrHv4s=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","askGemini","jsxDEV","_jsxDEV","Home","_s","messages","setMessages","input","setInput","loading","setLoading","handleSend","trim","userMessage","role","parts","text","systemPrompt","conversation","prev","reply","botMessage","err","console","error","renderText","msg","_msg$parts","_msg$parts$","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","map","m","i","value","onChange","e","target","onKeyDown","key","disabled","placeholder","onClick","width","height","fill","cx","cy","r","_c","$RefreshReg$"],"sources":["D:/New folder/CheapTrip/front-end/src/pages/Home.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport '../styles/home.css';\r\nimport { askGemini } from '../services/aiService';\r\nimport ChatBox from '../components/ChatBox.tsx';\r\n\r\n\r\n\r\n\r\n\r\ninterface Message {\r\n  role: 'user' | 'model';\r\n  parts: { text: string }[];\r\n}\r\n\r\nconst Home: React.FC = () => {\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [input, setInput] = useState<string>('');\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n\r\n  const handleSend = async () => {\r\n    if (!input.trim() || loading) return;\r\n\r\n    const userMessage: Message = {\r\n      role: 'user',\r\n      parts: [{ text: input }],\r\n    };\r\n\r\n    const systemPrompt: Message = {\r\n      role: 'user',\r\n      parts: [{\r\n        text: 'Bạn là một trợ lý ảo chuyên về du lịch tên là chipchip. Chỉ trả lời các câu hỏi liên quan đến thông tin khách hàng và du lịch như gợi ý hành trình, địa điểm tham quan, ngân sách, phương tiện di chuyển, trải nghiệm. Nếu câu hỏi không liên quan, hãy từ chối một cách lịch sự. Không hỏi nhiều hơn 1 câu. Thêm icon cuối câu',\r\n      }],\r\n    };\r\n\r\n    const conversation: Message[] = [systemPrompt, ...messages, userMessage];\r\n\r\n    setMessages((prev) => [...prev, userMessage]);\r\n    setInput('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      const reply = await askGemini(conversation);\r\n      const botMessage: Message = {\r\n        role: 'model',\r\n        parts: [{ text: reply }],\r\n      };\r\n      setMessages((prev) => [...prev, botMessage]);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        {\r\n          role: 'model',\r\n          parts: [{ text: '❌ Lỗi kết nối đến AI' }],\r\n        },\r\n      ]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const renderText = (msg: Message): string =>\r\n    msg.parts?.[0]?.text || '';\r\n\r\n  return (\r\n    <div className=\"home\">\r\n      {/* Nền logo mờ */}\r\n      <img src=\"/cheaptrip-logo.png\" alt=\"CheapTrip Logo\" className=\"background-logo\" />\r\n\r\n      <div className=\"content\">\r\n        <h1 className=\"text-4xl mb-4 font-bold\">Chào mừng đến với CheapTrip 🌍</h1>\r\n        <p className=\"mb-6 text-lg\">Tư vấn hành trình du lịch thông minh với trợ lý ảo ChipChip 🧳</p>\r\n\r\n        <div className=\"chat-box bg-white text-black rounded-xl p-4 max-w-xl w-full mx-auto shadow-md\">\r\n          <div className=\"h-64 overflow-y-auto mb-4 border border-gray-300 rounded p-2 bg-gray-50\">\r\n            {messages.map((m, i) => (\r\n              <div key={i} className={`mb-2 flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n                <span\r\n                  className={`inline-block p-2 rounded-xl max-w-xs shadow text-sm ${\r\n                    m.role === 'user' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-black'\r\n                  }`}\r\n                >\r\n                  {renderText(m)}\r\n                </span>\r\n              </div>\r\n            ))}\r\n            {loading && (\r\n              <div className=\"text-left mb-2\">\r\n                <span className=\"inline-block bg-white shadow p-2 rounded\">\r\n                  ChipChip đang suy nghĩ...\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex\">\r\n            <input\r\n              className=\"flex-grow p-2 border border-gray-300 rounded-l\"\r\n              value={input}\r\n              onChange={(e) => setInput(e.target.value)}\r\n              onKeyDown={(e) => e.key === 'Enter' && handleSend()}\r\n              disabled={loading}\r\n              placeholder=\"Hỏi trợ lý về chuyến đi của bạn...\"\r\n            />\r\n            {/* <ChatBox /> */}\r\n            <button\r\n              onClick={handleSend}\r\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-r hover:bg-blue-700 transition\"\r\n              disabled={loading}\r\n            >\r\n              Gửi\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"scroll-indicator\">\r\n        <svg width=\"24\" height=\"24\" fill=\"#fff\">\r\n          <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}