{"ast":null,"code":"var _jsxFileName = \"D:\\\\New folder\\\\CheapTrip\\\\front-end\\\\src\\\\pages\\\\Home.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport '../styles/home.css';\nimport { askGemini } from '../services/aiService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const handleSend = async () => {\n    if (!input.trim() || loading) return;\n    const userMessage = {\n      role: 'user',\n      parts: [{\n        text: input\n      }]\n    };\n    const systemPrompt = {\n      role: 'user',\n      parts: [{\n        text: 'Bạn là một trợ lý ảo chuyên về du lịch tên là chipchip. Chỉ trả lời các câu hỏi liên quan đến thông tin khách hàng và du lịch như gợi ý hành trình, địa điểm tham quan, ngân sách, phương tiện di chuyển, trải nghiệm. Nếu câu hỏi không liên quan, hãy từ chối một cách lịch sự. Không hỏi nhiều hơn 1 câu. Thêm icon cuối câu'\n      }]\n    };\n    const conversation = [systemPrompt, ...messages, userMessage];\n    setMessages(prev => [...prev, userMessage]);\n    setInput('');\n    setLoading(true);\n    try {\n      const reply = await askGemini(conversation);\n      const botMessage = {\n        role: 'model',\n        parts: [{\n          text: reply\n        }]\n      };\n      setMessages(prev => [...prev, botMessage]);\n    } catch (err) {\n      console.error(err);\n      setMessages(prev => [...prev, {\n        role: 'model',\n        parts: [{\n          text: '❌ Lỗi kết nối đến AI'\n        }]\n      }]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const renderText = msg => {\n    var _msg$parts, _msg$parts$;\n    return ((_msg$parts = msg.parts) === null || _msg$parts === void 0 ? void 0 : (_msg$parts$ = _msg$parts[0]) === null || _msg$parts$ === void 0 ? void 0 : _msg$parts$.text) || '';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home flex flex-col items-center justify-center min-h-screen bg-gray-100\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-container w-full max-w-2xl bg-white shadow-lg rounded-xl overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-header bg-blue-600 text-white p-4 text-center text-lg font-semibold\",\n        children: [\"\\u0110ang tr\\xF2 chuy\\u1EC7n v\\u1EDBi \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-bold\",\n          children: \"ChipChip \\uD83E\\uDDED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-messages h-96 overflow-y-auto p-4 bg-gray-50\",\n        children: [messages.map((m, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `mb-3 flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `max-w-xs p-3 rounded-xl text-sm shadow ${m.role === 'user' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-black'}`,\n            children: renderText(m)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this)\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this)), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3 text-left\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"inline-block bg-white shadow p-2 rounded\",\n            children: \"ChipChip \\u0111ang suy ngh\\u0129...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-input flex border-t border-gray-300\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"flex-grow p-3 outline-none text-sm\",\n          type: \"text\",\n          placeholder: \"H\\u1ECFi ChipChip v\\u1EC1 chuy\\u1EBFn \\u0111i c\\u1EE7a b\\u1EA1n...\",\n          value: input,\n          onChange: e => setInput(e.target.value),\n          onKeyDown: e => e.key === 'Enter' && handleSend(),\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSend,\n          className: \"bg-blue-600 text-white px-4 text-sm hover:bg-blue-700 transition\",\n          disabled: loading,\n          children: \"G\\u1EEDi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"QcbopfskvOtpvx/BuTIYXPrHv4s=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","askGemini","jsxDEV","_jsxDEV","Home","_s","messages","setMessages","input","setInput","loading","setLoading","handleSend","trim","userMessage","role","parts","text","systemPrompt","conversation","prev","reply","botMessage","err","console","error","renderText","msg","_msg$parts","_msg$parts$","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","m","i","type","placeholder","value","onChange","e","target","onKeyDown","key","disabled","onClick","_c","$RefreshReg$"],"sources":["D:/New folder/CheapTrip/front-end/src/pages/Home.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport '../styles/home.css';\r\nimport { askGemini } from '../services/aiService';\r\n\r\ninterface Message {\r\n  role: 'user' | 'model';\r\n  parts: { text: string }[];\r\n}\r\n\r\nconst Home: React.FC = () => {\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [input, setInput] = useState<string>('');\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n\r\n  const handleSend = async () => {\r\n    if (!input.trim() || loading) return;\r\n\r\n    const userMessage: Message = {\r\n      role: 'user',\r\n      parts: [{ text: input }],\r\n    };\r\n\r\n    const systemPrompt: Message = {\r\n      role: 'user',\r\n      parts: [{\r\n        text: 'Bạn là một trợ lý ảo chuyên về du lịch tên là chipchip. Chỉ trả lời các câu hỏi liên quan đến thông tin khách hàng và du lịch như gợi ý hành trình, địa điểm tham quan, ngân sách, phương tiện di chuyển, trải nghiệm. Nếu câu hỏi không liên quan, hãy từ chối một cách lịch sự. Không hỏi nhiều hơn 1 câu. Thêm icon cuối câu',\r\n      }],\r\n    };\r\n\r\n    const conversation: Message[] = [systemPrompt, ...messages, userMessage];\r\n\r\n    setMessages((prev) => [...prev, userMessage]);\r\n    setInput('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      const reply = await askGemini(conversation);\r\n      const botMessage: Message = {\r\n        role: 'model',\r\n        parts: [{ text: reply }],\r\n      };\r\n      setMessages((prev) => [...prev, botMessage]);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        {\r\n          role: 'model',\r\n          parts: [{ text: '❌ Lỗi kết nối đến AI' }],\r\n        },\r\n      ]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const renderText = (msg: Message): string => msg.parts?.[0]?.text || '';\r\n\r\n  return (\r\n    <div className=\"home flex flex-col items-center justify-center min-h-screen bg-gray-100\">\r\n      <div className=\"chat-container w-full max-w-2xl bg-white shadow-lg rounded-xl overflow-hidden\">\r\n        \r\n        {/* Header - đang trò chuyện với ChipChip */}\r\n        <div className=\"chat-header bg-blue-600 text-white p-4 text-center text-lg font-semibold\">\r\n          Đang trò chuyện với <span className=\"font-bold\">ChipChip 🧭</span>\r\n        </div>\r\n\r\n        {/* Chat Messages */}\r\n        <div className=\"chat-messages h-96 overflow-y-auto p-4 bg-gray-50\">\r\n          {messages.map((m, i) => (\r\n            <div key={i} className={`mb-3 flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n              <div\r\n                className={`max-w-xs p-3 rounded-xl text-sm shadow ${\r\n                  m.role === 'user' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-black'\r\n                }`}\r\n              >\r\n                {renderText(m)}\r\n              </div>\r\n            </div>\r\n          ))}\r\n          {loading && (\r\n            <div className=\"mb-3 text-left\">\r\n              <span className=\"inline-block bg-white shadow p-2 rounded\">\r\n                ChipChip đang suy nghĩ...\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Input */}\r\n        <div className=\"chat-input flex border-t border-gray-300\">\r\n          <input\r\n            className=\"flex-grow p-3 outline-none text-sm\"\r\n            type=\"text\"\r\n            placeholder=\"Hỏi ChipChip về chuyến đi của bạn...\"\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            onKeyDown={(e) => e.key === 'Enter' && handleSend()}\r\n            disabled={loading}\r\n          />\r\n          <button\r\n            onClick={handleSend}\r\n            className=\"bg-blue-600 text-white px-4 text-sm hover:bg-blue-700 transition\"\r\n            disabled={loading}\r\n          >\r\n            Gửi\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}