{"ast":null,"code":"var _jsxFileName = \"D:\\\\hackathon\\\\CheapTrip\\\\front-end\\\\src\\\\pages\\\\AssistantPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { askGemini } from '../services/aiService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AssistantPage = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const handleSend = async () => {\n    if (!input.trim() || loading) return;\n    const userMessage = {\n      role: 'user',\n      parts: [{\n        text: input\n      }]\n    };\n\n    // Gửi kèm prompt hệ thống cho AI\n    const systemMessage = {\n      role: 'system',\n      parts: [{\n        text: `\n      Bạn là một trợ lý ảo chuyên về du lịch.\n      Chỉ trả lời các câu hỏi liên quan đến lịch trình du lịch, điểm đến, ngân sách, phương tiện di chuyển, trải nghiệm khi đi du lịch,...\n      Nếu người dùng hỏi về chủ đề không liên quan đến du lịch (như lập trình, toán học, tôn giáo,...), hãy lịch sự từ chối và nói: \"Tôi chỉ hỗ trợ bạn trong các vấn đề liên quan đến du lịch.\"\n      Hãy luôn giữ vai trò này trong suốt cuộc hội thoại.\n            `.trim()\n      }]\n    };\n    const fullMessages = [systemMessage, ...messages, userMessage];\n    setMessages(prev => [...prev, userMessage]);\n    setInput('');\n    setLoading(true);\n    try {\n      const replyText = await askGemini(fullMessages);\n      const aiMessage = {\n        role: 'model',\n        parts: [{\n          text: replyText\n        }]\n      };\n      setMessages(prev => [...prev, aiMessage]);\n    } catch (error) {\n      setMessages(prev => [...prev, {\n        role: 'model',\n        parts: [{\n          text: '❌ Lỗi kết nối đến AI'\n        }]\n      }]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const renderMessageText = msg => {\n    var _msg$parts, _msg$parts$;\n    return ((_msg$parts = msg.parts) === null || _msg$parts === void 0 ? void 0 : (_msg$parts$ = _msg$parts[0]) === null || _msg$parts$ === void 0 ? void 0 : _msg$parts$.text) || '';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-[70vh] overflow-y-auto bg-gray-100 p-2 rounded\",\n      children: [messages.map((m, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `mb-2 ${m.role === 'user' ? 'text-right' : 'text-left'}`,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"inline-block bg-white shadow p-2 rounded\",\n          children: renderMessageText(m)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this)), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-left mb-2\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"inline-block bg-white shadow p-2 rounded\",\n          children: \"\\u0110ang ngh\\u0129...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 flex\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"flex-grow p-2 border rounded\",\n        placeholder: \"H\\u1ECFi l\\u1ECBch tr\\xECnh du l\\u1ECBch...\",\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyDown: e => e.key === 'Enter' && handleSend(),\n        disabled: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSend,\n        className: \"ml-2 px-4 py-2 bg-blue-500 text-white rounded\",\n        disabled: loading,\n        children: \"G\\u1EEDi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(AssistantPage, \"QcbopfskvOtpvx/BuTIYXPrHv4s=\");\n_c = AssistantPage;\nexport default AssistantPage;\nvar _c;\n$RefreshReg$(_c, \"AssistantPage\");","map":{"version":3,"names":["React","useState","askGemini","jsxDEV","_jsxDEV","AssistantPage","_s","messages","setMessages","input","setInput","loading","setLoading","handleSend","trim","userMessage","role","parts","text","systemMessage","fullMessages","prev","replyText","aiMessage","error","renderMessageText","msg","_msg$parts","_msg$parts$","className","children","map","m","i","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","e","target","onKeyDown","key","disabled","onClick","_c","$RefreshReg$"],"sources":["D:/hackathon/CheapTrip/front-end/src/pages/AssistantPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { askGemini } from '../services/aiService';\r\n\r\nconst AssistantPage = () => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSend = async () => {\r\n    if (!input.trim() || loading) return;\r\n\r\n    const userMessage = { role: 'user', parts: [{ text: input }] };\r\n\r\n    // Gửi kèm prompt hệ thống cho AI\r\n    const systemMessage = {\r\n        role: 'system',\r\n        parts: [\r\n          {\r\n            text: `\r\n      Bạn là một trợ lý ảo chuyên về du lịch.\r\n      Chỉ trả lời các câu hỏi liên quan đến lịch trình du lịch, điểm đến, ngân sách, phương tiện di chuyển, trải nghiệm khi đi du lịch,...\r\n      Nếu người dùng hỏi về chủ đề không liên quan đến du lịch (như lập trình, toán học, tôn giáo,...), hãy lịch sự từ chối và nói: \"Tôi chỉ hỗ trợ bạn trong các vấn đề liên quan đến du lịch.\"\r\n      Hãy luôn giữ vai trò này trong suốt cuộc hội thoại.\r\n            `.trim()\r\n          }\r\n        ]\r\n      };\r\n      \r\n\r\n    const fullMessages = [systemMessage, ...messages, userMessage];\r\n\r\n    setMessages((prev) => [...prev, userMessage]);\r\n    setInput('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      const replyText = await askGemini(fullMessages);\r\n      const aiMessage = { role: 'model', parts: [{ text: replyText }] };\r\n      setMessages((prev) => [...prev, aiMessage]);\r\n    } catch (error) {\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        { role: 'model', parts: [{ text: '❌ Lỗi kết nối đến AI' }] },\r\n      ]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const renderMessageText = (msg) => msg.parts?.[0]?.text || '';\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <div className=\"h-[70vh] overflow-y-auto bg-gray-100 p-2 rounded\">\r\n        {messages.map((m, i) => (\r\n          <div\r\n            key={i}\r\n            className={`mb-2 ${m.role === 'user' ? 'text-right' : 'text-left'}`}\r\n          >\r\n            <span className=\"inline-block bg-white shadow p-2 rounded\">\r\n              {renderMessageText(m)}\r\n            </span>\r\n          </div>\r\n        ))}\r\n        {loading && (\r\n          <div className=\"text-left mb-2\">\r\n            <span className=\"inline-block bg-white shadow p-2 rounded\">Đang nghĩ...</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"mt-4 flex\">\r\n        <input\r\n          className=\"flex-grow p-2 border rounded\"\r\n          placeholder=\"Hỏi lịch trình du lịch...\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          onKeyDown={(e) => e.key === 'Enter' && handleSend()}\r\n          disabled={loading}\r\n        />\r\n        <button\r\n          onClick={handleSend}\r\n          className=\"ml-2 px-4 py-2 bg-blue-500 text-white rounded\"\r\n          disabled={loading}\r\n        >\r\n          Gửi\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AssistantPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}